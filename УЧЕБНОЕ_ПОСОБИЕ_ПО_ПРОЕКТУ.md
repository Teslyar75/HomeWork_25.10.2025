# üìö –£–ß–ï–ë–ù–û–ï –ü–û–°–û–ë–ò–ï –ü–û –ü–†–û–ï–ö–¢–£ ASP.NET MVC
## –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

---

## üéØ **–í–í–ï–î–ï–ù–ò–ï**

–î–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —É—á–µ–±–Ω–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ ASP.NET Core MVC, –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—â–µ–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏** –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **–†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö** —á–µ—Ä–µ–∑ Entity Framework Core
- **Dependency Injection** –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
- **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

---

## üèóÔ∏è **–ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê**

### **1. –û–±—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫**

```
ASP-421HomeWork-master/
‚îú‚îÄ‚îÄ Controllers/           # –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã MVC
‚îú‚îÄ‚îÄ Data/                 # –°–ª–æ–π –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ Entities/         # –°—É—â–Ω–æ—Å—Ç–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ Configuration/    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è EF Core
‚îú‚îÄ‚îÄ Middleware/           # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ middleware
‚îú‚îÄ‚îÄ Models/              # –ú–æ–¥–µ–ª–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
‚îú‚îÄ‚îÄ Services/            # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏ —Å–µ—Ä–≤–∏—Å—ã
‚îú‚îÄ‚îÄ Views/               # Razor –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
‚îú‚îÄ‚îÄ wwwroot/             # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
‚îî‚îÄ‚îÄ Migrations/          # –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```

### **2. –ü—Ä–∏–Ω—Ü–∏–ø—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã**

- **MVC Pattern** - —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏, –¥–∞–Ω–Ω—ã—Ö –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
- **Repository Pattern** - —á–µ—Ä–µ–∑ Entity Framework
- **Dependency Injection** - –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- **Middleware Pattern** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
- **Service Layer** - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö

---

## üìä **–°–õ–û–ô –î–ê–ù–ù–´–• (Data Layer)**

### **1. –°—É—â–Ω–æ—Å—Ç–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**

#### **User.cs** - –û—Å–Ω–æ–≤–Ω–∞—è —Å—É—â–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```csharp
public class User
{
    public Guid      Id           { get; set; }        // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
    public String    Name         { get; set; }        // –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    public String    Email        { get; set; }        // Email –∞–¥—Ä–µ—Å
    public DateTime? Birthdate    { get; set; }        // –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è (nullable)
    public DateTime  RegisteredAt { get; set; }        // –î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
    public DateTime? DeletedAt    { get; set; }        // –î–∞—Ç–∞ —É–¥–∞–ª–µ–Ω–∏—è (soft delete)
    
    // –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞
    [JsonIgnore]
    public List<UserAccess> Accesses { get; set; } = new();
}
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –•—Ä–∞–Ω–∏—Ç –æ—Å–Ω–æ–≤–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ —Å–∏—Å—Ç–µ–º—ã.

#### **UserAccess.cs** - –î–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞
```csharp
public class UserAccess
{
    public Guid   Id     { get; set; }    // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
    public Guid   UserId { get; set; }    // –°—Å—ã–ª–∫–∞ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    public String RoleId { get; set; }    // –†–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    public String Login  { get; set; }    // –õ–æ–≥–∏–Ω –¥–ª—è –≤—Ö–æ–¥–∞
    public String Salt   { get; set; }    // –°–æ–ª—å –¥–ª—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
    public String Dk     { get; set; }    // –ü—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–π –∫–ª—é—á (—Ö–µ—à –ø–∞—Ä–æ–ª—è)
    
    // –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞
    public User     User { get; set; } = null!;
    public UserRole Role { get; set; } = null!;
}
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û—Ç–¥–µ–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞ –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–ª—å –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–π –∫–ª—é—á –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π.

#### **UserRole.cs** - –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```csharp
public class UserRole
{
    public String Id          { get; set; }    // –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ä–æ–ª–∏
    public String Description { get; set; }    // –û–ø–∏—Å–∞–Ω–∏–µ —Ä–æ–ª–∏
    public bool   CanCreate   { get; set; }    // –ü—Ä–∞–≤–æ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ
    public bool   CanRead     { get; set; }    // –ü—Ä–∞–≤–æ –Ω–∞ —á—Ç–µ–Ω–∏–µ
    public bool   CanUpdate   { get; set; }    // –ü—Ä–∞–≤–æ –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
    public bool   CanDelete   { get; set; }    // –ü—Ä–∞–≤–æ –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ
}
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞ (RBAC - Role-Based Access Control).

#### **Visit.cs** - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∑–∞—Ö–æ–¥–æ–≤
```csharp
public class Visit
{
    public Guid Id { get; set; }                    // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
    public DateTime VisitTime { get; set; }         // –í—Ä–µ–º—è –∑–∞—Ö–æ–¥–∞
    public string RequestPath { get; set; }         // –ü—É—Ç—å –∑–∞–ø—Ä–æ—Å–∞ (/Home/Privacy)
    public string? UserLogin { get; set; }          // –õ–æ–≥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (null –µ—Å–ª–∏ –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω)
    public string ConfirmationCode { get; set; }    // –ö–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
    public bool IsConfirmed { get; set; }           // –°—Ç–∞—Ç—É—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
    public DateTime? ConfirmedAt { get; set; }      // –í—Ä–µ–º—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
    public string? UserAgent { get; set; }          // –ë—Ä–∞—É–∑–µ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    public string? IpAddress { get; set; }          // IP –∞–¥—Ä–µ—Å
}
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ —Å–∞–π—Ç–µ —Å —Å–∏—Å—Ç–µ–º–æ–π –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∑–∞—Ö–æ–¥–æ–≤.

### **2. –ö–æ–Ω—Ç–µ–∫—Å—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**

#### **DataContext.cs** - –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–∫—Å—Ç EF Core
```csharp
public class DataContext : DbContext
{
    public DbSet<Entities.User> Users { get; set; }
    public DbSet<Entities.UserAccess> UserAccesses { get; set; }
    public DbSet<Entities.UserRole> UserRoles { get; set; }
    public DbSet<Entities.Visit> Visits { get; set; }

    protected override void OnModelCreating(ModelBuilder modelBuilder)
    {
        modelBuilder.ApplyConfiguration(new UserAccessConfiguration());
        modelBuilder.ApplyConfiguration(new UserRoleConfiguration());
        modelBuilder.ApplyConfiguration(new UserConfiguration());
        modelBuilder.ApplyConfiguration(new VisitConfiguration());
    }
}
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ —Å–≤—è–∑–∏ –º–µ–∂–¥—É —Å—É—â–Ω–æ—Å—Ç—è–º–∏ —á–µ—Ä–µ–∑ Fluent API –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

---

## üéÆ **–°–õ–û–ô –ö–û–ù–¢–†–û–õ–õ–ï–†–û–í (Controllers)**

### **1. HomeController.cs** - –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä

#### **–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
- `Index()` - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º –∑–∞—Ö–æ–¥–æ–≤
- `IoC()` - –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- `Razor()` - –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è Razor —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
- `Privacy()` - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–ª–∏—Ç–∏–∫–∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏
- `ConfirmVisit()` - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞—Ö–æ–¥–∞ –ø–æ –∫–æ–¥—É
- `VisitStats()` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞—Ö–æ–¥–æ–≤

#### **–ö–ª—é—á–µ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**

**–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∑–∞—Ö–æ–¥–æ–≤:**
```csharp
private async Task TrackVisit()
{
    var visit = new Visit
    {
        Id = Guid.NewGuid(),
        VisitTime = DateTime.UtcNow,
        RequestPath = HttpContext.Request.Path,
        UserLogin = HttpContext.Session.GetString("UserLogin"),
        ConfirmationCode = _confirmationService.GenerateCode(),
        IsConfirmed = false,
        UserAgent = HttpContext.Request.Headers["User-Agent"].FirstOrDefault(),
        IpAddress = HttpContext.Connection.RemoteIpAddress?.ToString()
    };
    
    _dataContext.Visits.Add(visit);
    await _dataContext.SaveChangesAsync();
}
```

**–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞—Ö–æ–¥–∞:**
```csharp
[HttpPost]
public async Task<IActionResult> ConfirmVisit(string confirmationCode)
{
    var visit = await _dataContext.Visits
        .FirstOrDefaultAsync(v => v.Id == Guid.Parse(visitId) && 
                                 v.ConfirmationCode == confirmationCode);
    
    if (visit != null && !visit.IsConfirmed)
    {
        visit.IsConfirmed = true;
        visit.ConfirmedAt = DateTime.UtcNow;
        await _dataContext.SaveChangesAsync();
    }
}
```

### **2. UserController.cs** - –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

#### **–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
- `SignIn()` - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `SignUp()` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `Register()` - –û–±—Ä–∞–±–æ—Ç–∫–∞ POST –∑–∞–ø—Ä–æ—Å–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

#### **–ö–ª—é—á–µ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**

**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π:**
```csharp
public JsonResult SignIn()
{
    // –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ credentials –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞ Authorization
    String header = HttpContext.Request.Headers.Authorization.ToString();
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ö–µ–º—ã Basic Auth
    if (!header.StartsWith("Basic "))
        return Json(new { Status = 401, Data = "Invalid scheme" });
    
    String credentials = header["Basic ".Length..];
    
    // –í–∞–ª–∏–¥–∞—Ü–∏—è credentials
    if (String.IsNullOrEmpty(credentials))
        return Json(new { Status = 401, Data = "Empty credentials" });
    
    // –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ Base64
    try
    {
        userPass = Encoding.UTF8.GetString(Convert.FromBase64String(credentials));
    }
    catch (FormatException)
    {
        return Json(new { Status = 401, Data = "Invalid Base64 format" });
    }
    
    // –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ login:password
    if (!userPass.Contains(':'))
        return Json(new { Status = 401, Data = "Invalid credentials format" });
    
    String[] parts = userPass.Split(':', 2);
    if (parts.Length != 2 || String.IsNullOrEmpty(parts[0]) || String.IsNullOrEmpty(parts[1]))
        return Json(new { Status = 401, Data = "Invalid credentials" });
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
    var userAccess = _dataContext.UserAccesses
        .Include(ua => ua.User)
        .FirstOrDefault(ua => ua.Login == login);
    
    if (userAccess == null || _kdfService.Dk(password, userAccess.Salt) != userAccess.Dk)
        return Json(new { Status = 401, Data = "Credentials rejected" });
    
    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ —Å–µ—Å—Å–∏–∏
    HttpContext.Session.SetString("SignIn", JsonSerializer.Serialize(userAccess));
    
    return Json(new { Status = 200, Data = "Authorized", UserName = userAccess.User.Name });
}
```

**–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π:**
```csharp
public IActionResult SignUp()
{
    UserSignupViewModel viewModel = new();
    
    if (HttpContext.Session.Keys.Contains(RegisterKey))
    {
        UserSignupFormModel formModel = JsonSerializer.Deserialize<UserSignupFormModel>(
            HttpContext.Session.GetString(RegisterKey)!)!;
        
        viewModel.FormModel = formModel;
        viewModel.ValidationErrors = ValidateSignupForm(formModel);
        
        if (viewModel.ValidationErrors.Count == 0)
        {
            // –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            Data.Entities.User user = new()
            {
                Id = Guid.NewGuid(),
                Name = formModel.Name,
                Email = formModel.Email,
                Birthdate = formModel.Birthday,
                RegisteredAt = DateTime.Now,
                DeletedAt = null,
            };
            
            // –°–æ–∑–¥–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≤—Ö–æ–¥–∞
            String salt = Guid.NewGuid().ToString();
            Data.Entities.UserAccess userAccess = new()
            {
                Id = Guid.NewGuid(),
                UserId = user.Id,
                RoleId = "Guest",
                Login = formModel.Login,
                Salt = salt,
                Dk = _kdfService.Dk(formModel.Password, salt),
            };
            
            _dataContext.Users.Add(user);
            _dataContext.UserAccesses.Add(userAccess);
            _dataContext.SaveChanges();
        }
    }
    
    return View(viewModel);
}
```

**–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:**
```csharp
private Dictionary<String, String> ValidateSignupForm(UserSignupFormModel formModel)
{
    Dictionary<String, String> res = new();
    
    // –í–∞–ª–∏–¥–∞—Ü–∏—è –∏–º–µ–Ω–∏
    if (String.IsNullOrEmpty(formModel.Name))
        res[nameof(formModel.Name)] = "–Ü–º'—è –Ω–µ –º–æ–∂–µ –±—É—Ç–∏ –ø–æ—Ä–æ–∂–Ω—ñ–º";
    else if (!char.IsUpper(formModel.Name[0]))
        res[nameof(formModel.Name)] = "–Ü–º'—è –ø–æ–≤–∏–Ω–Ω–æ –ø–æ—á–∏–Ω–∞—Ç–∏—Å—è –∑ –≤–µ–ª–∏–∫–æ—ó –ª—ñ—Ç–µ—Ä–∏";
    else if (!formModel.Name.All(c => char.IsLetter(c) || char.IsWhiteSpace(c)))
        res[nameof(formModel.Name)] = "–Ü–º'—è –º–æ–∂–µ –º—ñ—Å—Ç–∏—Ç–∏ —Ç—ñ–ª—å–∫–∏ –ª—ñ—Ç–µ—Ä–∏ —Ç–∞ –ø—Ä–æ–±—ñ–ª–∏";
    
    // –í–∞–ª–∏–¥–∞—Ü–∏—è Email
    if (String.IsNullOrEmpty(formModel.Email))
        res[nameof(formModel.Email)] = "E-mail –Ω–µ –º–æ–∂–µ –±—É—Ç–∏ –ø–æ—Ä–æ–∂–Ω—ñ–º";
    else if (!IsValidEmail(formModel.Email))
        res[nameof(formModel.Email)] = "–í–≤–µ–¥—ñ—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç E-mail";
    
    // –í–∞–ª–∏–¥–∞—Ü–∏—è –ª–æ–≥–∏–Ω–∞
    if (formModel.Login?.Contains(':') ?? false)
        res[nameof(formModel.Login)] = "–£ –ª–æ–≥—ñ–Ω—ñ –Ω–µ –¥–æ–ø—É—Å–∫–∞—î—Ç—å—Å—è ':' (–¥–≤–æ–∫—Ä–∞–ø–∫–∞)";
    
    // –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–æ–ª—è
    if (String.IsNullOrEmpty(formModel.Password))
        res[nameof(formModel.Password)] = "–ü–∞—Ä–æ–ª—å –Ω–µ –º–æ–∂–µ –±—É—Ç–∏ –ø–æ—Ä–æ–∂–Ω—ñ–º";
    else if (formModel.Password.Length < 8)
        res[nameof(formModel.Password)] = "–ü–∞—Ä–æ–ª—å –ø–æ–≤–∏–Ω–µ–Ω –º—ñ—Å—Ç–∏—Ç–∏ –º—ñ–Ω—ñ–º—É–º 8 —Å–∏–º–≤–æ–ª—ñ–≤";
    else if (!formModel.Password.Any(char.IsUpper))
        res[nameof(formModel.Password)] = "–ü–∞—Ä–æ–ª—å –ø–æ–≤–∏–Ω–µ–Ω –º—ñ—Å—Ç–∏—Ç–∏ —Ö–æ—á–∞ –± –æ–¥–Ω—É –≤–µ–ª–∏–∫—É –ª—ñ—Ç–µ—Ä—É";
    else if (!formModel.Password.Any(char.IsDigit))
        res[nameof(formModel.Password)] = "–ü–∞—Ä–æ–ª—å –ø–æ–≤–∏–Ω–µ–Ω –º—ñ—Å—Ç–∏—Ç–∏ —Ö–æ—á–∞ –± –æ–¥–Ω—É —Ü–∏—Ñ—Ä—É";
    
    // –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è
    if (formModel.Password != formModel.Repeat)
        res[nameof(formModel.Repeat)] = "–ü–∞—Ä–æ–ª—ñ –Ω–µ –∑–±—ñ–≥–∞—é—Ç—å—Å—è";
    
    return res;
}
```

---

## üîß **–°–õ–û–ô –°–ï–†–í–ò–°–û–í (Services)**

### **1. –°–∏—Å—Ç–µ–º–∞ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π**

#### **IKdfService.cs** - –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–ª—é—á–µ–π
```csharp
public interface IKdfService
{
    String Dk(String password, String salt);   // Derived Key
}
```

#### **PbKdf1Service.cs** - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è PBKDF1
```csharp
public class PbKdf1Service : IKdfService
{
    const int c = 3;        // iteration count
    const int dkLen = 20;   // DK length in symbols

    public String Dk(String password, String salt)
    {
        String t = Hash(password + salt);
        for(int i = 0; i < c - 1; i += 1)
        {
            t = Hash(t);
        }
        return t[0..dkLen];
    }

    private static String Hash(String input) => Convert.ToHexString(
        System.Security.Cryptography.SHA1.HashData(
            System.Text.Encoding.UTF8.GetBytes(input) 
        )
    );
}
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π –ø–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É RFC 2898 (PBKDF1).

### **2. –°–∏—Å—Ç–µ–º–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª—É—á–∞–π–Ω—ã—Ö –∫–æ–¥–æ–≤**

#### **IRandomService.cs** - –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª—É—á–∞–π–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
```csharp
public interface IRandomService
{
    String Otp(int length);   // One Time Password (code)
    int Next(int maxValue);   // Random number from 0 to maxValue-1
}
```

#### **DefaultRandomService.cs** - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞
```csharp
public class DefaultRandomService : IRandomService
{
    private System.Random _random = new();

    public String Otp(int length)
    {
        return String.Join("",
            (new byte[length])
            .Select((_) => "0123456789"[_random.Next(10)])
        );
    }

    public int Next(int maxValue)
    {
        return _random.Next(maxValue);
    }
}
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã—Ö –ø–∞—Ä–æ–ª–µ–π –∏ —Å–ª—É—á–∞–π–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è –∫–æ–¥–æ–≤ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.

### **3. –°–∏—Å—Ç–µ–º–∞ –∫–æ–¥–æ–≤ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è**

#### **IConfirmationCodeService.cs** - –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ–¥–∞–º–∏
```csharp
public interface IConfirmationCodeService
{
    string GenerateCode();           // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
    bool IsValidCode(string code);   // –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –∫–æ–¥–∞
}
```

#### **ConfirmationCodeService.cs** - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞
```csharp
public class ConfirmationCodeService : IConfirmationCodeService
{
    private readonly IRandomService _randomService;
    private const int CodeLength = 6;
    private const string AllowedChars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    public string GenerateCode()
    {
        var code = new char[CodeLength];
        for (int i = 0; i < CodeLength; i++)
        {
            code[i] = AllowedChars[_randomService.Next(AllowedChars.Length)];
        }
        return new string(code);
    }

    public bool IsValidCode(string code)
    {
        if (string.IsNullOrEmpty(code) || code.Length != CodeLength)
            return false;

        return code.All(c => AllowedChars.Contains(c));
    }
}
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–¥–æ–≤ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∑–∞—Ö–æ–¥–æ–≤.

---

## üîê **–°–ò–°–¢–ï–ú–ê –ê–£–¢–ï–ù–¢–ò–§–ò–ö–ê–¶–ò–ò**

### **1. Middleware –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏**

#### **AuthSessionMiddleware.cs** - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–µ—Å—Å–∏–π
```csharp
public class AuthSessionMiddleware
{
    public async Task InvokeAsync(HttpContext context)
    {
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã—Ö–æ–¥–∞ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
        if (context.Request.Query.ContainsKey("logout"))
        {
            context.Session.Remove("SignIn");
            context.Response.Redirect(context.Request.Path);
            return;
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –¥–∞–Ω–Ω—ã—Ö –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ —Å–µ—Å—Å–∏–∏
        if (context.Session.Keys.Contains("SignIn"))
        {
            UserAccess userAccess = JsonSerializer.Deserialize<UserAccess>(
                context.Session.GetString("SignIn")!)!;

            // –°–æ–∑–¥–∞–Ω–∏–µ Claims –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            var claims = new List<Claim>
            {
                new Claim(ClaimTypes.Name, userAccess.User.Name),
                new Claim(ClaimTypes.Email, userAccess.User.Email),
                new Claim("Id", userAccess.User.Id.ToString()),
            };

            // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–∞—Ç—ã —Ä–æ–∂–¥–µ–Ω–∏—è –≤ Claims
            if (userAccess.User.Birthdate.HasValue)
            {
                claims.Add(new Claim(ClaimTypes.DateOfBirth, 
                    userAccess.User.Birthdate.Value.ToString("yyyy-MM-dd")));
            }

            // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            context.User = new ClaimsPrincipal(
                new ClaimsIdentity(claims, nameof(AuthSessionMiddleware))
            );
        }
        
        await _next(context);
    }
}
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** 
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã—Ö–æ–¥–∞ –∏–∑ —Å–∏—Å—Ç–µ–º—ã —á–µ—Ä–µ–∑ query –ø–∞—Ä–∞–º–µ—Ç—Ä `?logout`
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ —Å–µ—Å—Å–∏–∏
- –°–æ–∑–¥–∞–Ω–∏–µ Claims –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ ASP.NET Core

### **2. –°–∏—Å—Ç–µ–º–∞ Claims**

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Claims –≤ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è—Ö:**
```csharp
@if (Context.User.Identity?.IsAuthenticated ?? false)
{
    String name = Context.User.Claims
        .First(c => c.Type == ClaimTypes.Name).Value;

    // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–µ—Ä–≤–æ–π –±—É–∫–≤—ã –∏–º–µ–Ω–∏ –≤ –∫—Ä—É–≥–ª–æ–º –±–µ–π–¥–∂–µ
    <span class="auth-user-letter" title="@name">@(name[0])</span>
    
    // –†–∞—Å—á–µ—Ç –¥–Ω–µ–π –¥–æ –¥–Ω—è —Ä–æ–∂–¥–µ–Ω–∏—è
    var birthdayClaim = Context.User.Claims
        .FirstOrDefault(c => c.Type == ClaimTypes.DateOfBirth);
    if (birthdayClaim != null)
    {
        var birthday = DateTime.Parse(birthdayClaim.Value);
        var today = DateTime.Today;
        var nextBirthday = new DateTime(today.Year, birthday.Month, birthday.Day);
        
        if (nextBirthday < today)
            nextBirthday = nextBirthday.AddYears(1);
        
        var daysUntilBirthday = (nextBirthday - today).Days;
        
        <span class="badge bg-info">
            @if (daysUntilBirthday == 0)
            {
                <text>–°—å–æ–≥–æ–¥–Ω—ñ –¥–µ–Ω—å –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è!</text>
            }
            else if (daysUntilBirthday == 1)
            {
                <text>–ó–∞–≤—Ç—Ä–∞ –¥–µ–Ω—å –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è!</text>
            }
            else
            {
                <text>–î–æ –¥–Ω—è –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è @daysUntilBirthday –¥–Ω.</text>
            }
        </span>
    }
}
```

---

## üé® **–ü–†–ï–î–°–¢–ê–í–õ–ï–ù–ò–Ø (Views)**

### **1. Layout (_Layout.cshtml)**

#### **–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- **–ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å** —Å —É—Å–ª–æ–≤–Ω—ã–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º
- **–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏** —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
- **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** (–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω/–Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω)
- **–°—á–µ—Ç—á–∏–∫ –¥–Ω–µ–π –¥–æ –¥–Ω—è —Ä–æ–∂–¥–µ–Ω–∏—è**

#### **–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

**–£—Å–ª–æ–≤–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏:**
```html
@if (Context.User.Identity?.IsAuthenticated ?? false)
{
    <!-- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
    <div class="d-flex align-items-center">
        <span class="auth-user-letter" title="@name">@(name[0])</span>
        <a class="btn btn-outline-secondary ms-2" href="?logout">
            <i class="bi bi-box-arrow-right"></i>
        </a>
        <!-- –°—á–µ—Ç—á–∏–∫ –¥–Ω–µ–π –¥–æ –¥–Ω—è —Ä–æ–∂–¥–µ–Ω–∏—è -->
    </div>
}
else
{
    <!-- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
    <div>
        <a class="btn btn-outline-secondary" asp-controller="User" asp-action="SignUp">
            <i class="bi bi-person-add"></i>
        </a>
        <button type="button" class="btn btn-outline-secondary" 
                data-bs-toggle="modal" data-bs-target="#authModal">
            <i class="bi bi-box-arrow-in-right"></i>
        </button>
    </div>
}
```

**–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:**
```html
<div class="modal fade" id="authModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5">–ê–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è</h1>
            </div>
            <div class="modal-body">
                <form id="auth-form">
                    <div class="input-group mb-3">
                        <input name="auth-login" type="text" class="form-control" 
                               placeholder="–õ–æ–≥—ñ–Ω" />
                    </div>
                    <div class="input-group mb-3">
                        <input name="auth-password" type="password" class="form-control" 
                               placeholder="–ü–∞—Ä–æ–ª—å" />
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö/—É—Å–ø–µ—Ö–µ -->
                <div id="auth-error" class="alert alert-danger d-none">
                    <span id="auth-error-text"></span>
                </div>
                <div id="auth-success" class="alert alert-success d-none">
                    <span id="auth-success-text"></span>
                </div>
                
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                    –°–∫–∞—Å—É–≤–∞—Ç–∏
                </button>
                <button type="submit" form="auth-form" class="btn btn-primary">
                    –í—Ö—ñ–¥
                </button>
            </div>
        </div>
    </div>
</div>
```

### **2. –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (Index.cshtml)**

#### **–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π** (TempData)
- **–ö–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∑–∞—Ö–æ–¥–∞** (–µ—Å–ª–∏ –µ—Å—Ç—å –≤ —Å–µ—Å—Å–∏–∏)
- **–ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å—Å—ã–ª–∫–∏** –Ω–∞ –¥—Ä—É–≥–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

#### **–°–∏—Å—Ç–µ–º–∞ —Å–æ–æ–±—â–µ–Ω–∏–π:**
```html
@if (TempData["Success"] != null)
{
    <div class="alert alert-success alert-dismissible fade show">
        @TempData["Success"]
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
}

@if (TempData["Error"] != null)
{
    <div class="alert alert-danger alert-dismissible fade show">
        @TempData["Error"]
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
}
```

**–ö–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∑–∞—Ö–æ–¥–∞:**
```html
@if (Context.Session.GetString("ConfirmationCode") != null)
{
    <div class="card mb-4">
        <div class="card-header">
            <h5 class="mb-0">–ö–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∑–∞—Ö–æ–¥–∞</h5>
        </div>
        <div class="card-body">
            <p>–í–∞—à –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è: 
               <strong class="text-primary">@Context.Session.GetString("ConfirmationCode")</strong>
            </p>
            <p class="text-muted small">
                –≠—Ç–æ—Ç –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –≤–∞—à –∑–∞—Ö–æ–¥ –Ω–∞ —Å–∞–π—Ç –≤ @DateTime.Now.ToString("HH:mm")
            </p>
            
            <form asp-action="ConfirmVisit" method="post" class="mt-3">
                <div class="input-group">
                    <input type="text" name="confirmationCode" class="form-control" 
                           placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è" required>
                    <button class="btn btn-success" type="submit">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞—Ö–æ–¥</button>
                </div>
            </form>
        </div>
    </div>
}
```

---

## üíª **–ö–õ–ò–ï–ù–¢–°–ö–ê–Ø –ß–ê–°–¢–¨ (JavaScript)**

### **1. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (site.js)**

#### **–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**

**–ö–ª–∞—Å—Å Base64 –¥–ª—è –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è:**
```javascript
class Base64 {
    static #textEncoder = new TextEncoder();
    static #textDecoder = new TextDecoder();

    static encode = (str) => btoa(String.fromCharCode(...Base64.#textEncoder.encode(str)));
    static decode = (str) => Base64.#textDecoder.decode(Uint8Array.from(atob(str), c => c.charCodeAt(0)));
}
```

**–§—É–Ω–∫—Ü–∏—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏:**
```javascript
function showAuthMessage(type, message) {
    const errorDiv = document.getElementById('auth-error');
    const successDiv = document.getElementById('auth-success');
    const errorText = document.getElementById('auth-error-text');
    const successText = document.getElementById('auth-success-text');
    
    // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è
    errorDiv.classList.add('d-none');
    successDiv.classList.add('d-none');
    
    if (type === 'error') {
        errorText.textContent = message;
        errorDiv.classList.remove('d-none');
    } else if (type === 'success') {
        successText.textContent = message;
        successDiv.classList.remove('d-none');
    }
}
```

**–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:**
```javascript
document.addEventListener('submit', e => {
    const form = e.target;
    if (form.id == "auth-form") {
        e.preventDefault();
        const data = new FormData(form);
        const login = data.get("auth-login");
        const password = data.get("auth-password");
        
        // RFC 7617 - Basic Authentication
        const userPass = login + ':' + password;
        const credentials = Base64.encode(userPass);
        
        fetch("/User/SignIn", {
            headers: {
                "Authorization": "Basic " + credentials
            }
        }).then(r => r.json()).then(j => {
            if (j.status == 200) {
                showAuthMessage('success', '–ü—Ä–∏–≤—ñ—Ç: ' + j.userName);
                setTimeout(() => {
                    window.location.reload();
                }, 1500);
            }
            else {
                showAuthMessage('error', j.data || '–ü–æ–º–∏–ª–∫–∞ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó');
            }
        }).catch(error => {
            showAuthMessage('error', '–ü–æ–º–∏–ª–∫–∞ –º–µ—Ä–µ–∂—ñ: ' + error.message);
        });
    }
});
```

### **2. –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è (site.css)**

#### **–°—Ç–∏–ª–∏ –¥–ª—è –±—É–∫–≤—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:**
```css
.auth-user-letter {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background-color: #007bff;
  color: white;
  font-weight: bold;
  font-size: 14px;
  text-decoration: none;
  transition: all 0.3s ease;
  border: 2px solid #007bff;
}

.auth-user-letter:hover {
  background-color: #0056b3;
  border-color: #0056b3;
  color: white;
  text-decoration: none;
  transform: scale(1.1);
}

.auth-user-letter:focus {
  outline: none;
  box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
}
```

---

## ‚öôÔ∏è **–ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø**

### **1. Program.cs - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤**

```csharp
var builder = WebApplication.CreateBuilder(args);

// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ MVC —Å–µ—Ä–≤–∏—Å–æ–≤
builder.Services.AddControllersWithViews();

// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
builder.Services.AddSingleton<IRandomService, DefaultRandomService>();
builder.Services.AddSingleton<IKdfService, PbKdf1Service>();
builder.Services.AddScoped<IConfirmationCodeService, ConfirmationCodeService>();

// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
builder.Services.AddDbContext<DataContext>(options => 
    options.UseSqlServer(builder.Configuration.GetConnectionString("DataContext"))
);

// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Å—Å–∏–π
builder.Services.AddDistributedMemoryCache();
builder.Services.AddSession(options =>
{
    options.IdleTimeout = TimeSpan.FromMinutes(15);
    options.Cookie.HttpOnly = true;
    options.Cookie.IsEssential = true;
});

var app = builder.Build();

// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ pipeline
if (!app.Environment.IsDevelopment())
{
    app.UseExceptionHandler("/Home/Error");
    app.UseHsts();
}

app.UseHttpsRedirection();
app.UseRouting();
app.UseAuthorization();
app.UseSession();
app.MapStaticAssets();

// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π middleware
app.UseAuthSession();

// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
app.MapControllerRoute(
    name: "default",
    pattern: "{controller=Home}/{action=Index}/{id?}")
    .WithStaticAssets();

app.Run();
```

### **2. appsettings.json - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**

```json
{
  "ConnectionStrings": {
    "DataContext": "Server=(localdb)\\mssqllocaldb;Database=ASP-421;Trusted_Connection=true;MultipleActiveResultSets=true"
  },
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "AllowedHosts": "*"
}
```

---

## üóÑÔ∏è **–°–ò–°–¢–ï–ú–ê –ú–ò–ì–†–ê–¶–ò–ô**

### **1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–∏–≥—Ä–∞—Ü–∏–π**

- **20250830083643_Initial.cs** - –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î
- **20250830090703_InitialCorrection.cs** - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ
- **20250905222423_AddVisitsTable.cs** - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –∑–∞—Ö–æ–¥–æ–≤
- **20250912214333_UpdateToMasterDatabase.cs** - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ –º–∞—Å—Ç–µ—Ä-–±–∞–∑—ã

### **2. –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–∏–≥—Ä–∞—Ü–∏—è–º–∏**

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏
dotnet ef migrations add MigrationName

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
dotnet ef database update

# –û—Ç–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–∏
dotnet ef database update PreviousMigrationName

# –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–π –º–∏–≥—Ä–∞—Ü–∏–∏
dotnet ef migrations remove
```

---

## üîí **–ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨ –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø**

### **1. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**
- **Basic Authentication** —á–µ—Ä–µ–∑ HTTP –∑–∞–≥–æ–ª–æ–≤–∫–∏
- **Base64 –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ** credentials
- **–í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞** –¥–∞–Ω–Ω—ã—Ö
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π** –ø—Ä–∏ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–∏

### **2. –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π**
- **PBKDF1** –∞–ª–≥–æ—Ä–∏—Ç–º (RFC 2898)
- **–°–æ–ª—å** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–∞—Ä–æ–ª—è
- **–ü—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–π –∫–ª—é—á** –≤–º–µ—Å—Ç–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è

### **3. –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**
- **–°–µ—Ä–≤–µ—Ä–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è** –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞** email –∞–¥—Ä–µ—Å–æ–≤
- **–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ø–∞—Ä–æ–ª—è–º** (–¥–ª–∏–Ω–∞, —Å–ª–æ–∂–Ω–æ—Å—Ç—å)
- **–ó–∞—â–∏—Ç–∞ –æ—Ç XSS** —á–µ—Ä–µ–∑ textContent

### **4. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏**
- **HttpOnly cookies** –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- **–¢–∞–π–º–∞—É—Ç —Å–µ—Å—Å–∏–π** (15 –º–∏–Ω—É—Ç)
- **–û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö** –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ

---

## üìà **–û–¢–°–õ–ï–ñ–ò–í–ê–ù–ò–ï –ê–ö–¢–ò–í–ù–û–°–¢–ò**

### **1. –°–∏—Å—Ç–µ–º–∞ –∑–∞—Ö–æ–¥–æ–≤**
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ** –∫–∞–∂–¥–æ–≥–æ –∑–∞—Ö–æ–¥–∞
- **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–æ–≤ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞—Ö–æ–¥–∞
- **–°–±–æ—Ä –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö** (IP, User-Agent, –≤—Ä–µ–º—è)
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞—Ö–æ–¥–æ–≤** –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º

### **2. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞—Ö–æ–¥–æ–≤**
- **6-—Å–∏–º–≤–æ–ª—å–Ω—ã–µ –∫–æ–¥—ã** –∏–∑ –±—É–∫–≤ –∏ —Ü–∏—Ñ—Ä
- **–í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–¥–æ–≤** –ø–µ—Ä–µ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
- **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞** –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- **–í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏** –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

---

## üéØ **–ü–û–°–õ–ï–î–û–í–ê–¢–ï–õ–¨–ù–û–°–¢–¨ –í–´–ü–û–õ–ù–ï–ù–ò–Ø –†–ê–ë–û–¢**

### **–≠—Ç–∞–ø 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã**
1. –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ ASP.NET Core MVC
2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Entity Framework Core
3. –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π (User, UserAccess, UserRole)
4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### **–≠—Ç–∞–ø 2: –°–∏—Å—Ç–µ–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏**
1. –°–æ–∑–¥–∞–Ω–∏–µ UserController —Å –º–µ—Ç–æ–¥–∞–º–∏ SignIn/SignUp
2. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è Basic Authentication
3. –°–æ–∑–¥–∞–Ω–∏–µ middleware –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–µ—Å—Å–∏–π
4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Claims —Å–∏—Å—Ç–µ–º—ã

### **–≠—Ç–∞–ø 3: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
1. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è PBKDF1 –¥–ª—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π
2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å–µ—Å—Å–∏–π

### **–≠—Ç–∞–ø 4: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**
1. –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
2. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞ –¥–Ω–µ–π –¥–æ –¥–Ω—è —Ä–æ–∂–¥–µ–Ω–∏—è
4. –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

### **–≠—Ç–∞–ø 5: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏**
1. –°–æ–∑–¥–∞–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏ Visit
2. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –∫–æ–¥–æ–≤ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∑–∞—Ö–æ–¥–æ–≤
4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º–∏

### **–≠—Ç–∞–ø 6: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**
1. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
4. –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞

---

## üèÜ **–ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï**

–î–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞ ASP.NET Core:

### **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –Ω–∞–≤—ã–∫–∏:**
- ‚úÖ **MVC Architecture** - –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- ‚úÖ **Entity Framework Core** - —Ä–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **Dependency Injection** - –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚úÖ **Middleware Pattern** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ **Claims-based Authentication** - —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- ‚úÖ **Session Management** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
- ‚úÖ **Data Validation** - –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- ‚úÖ **Frontend Integration** - JavaScript –∏ CSS

### **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:**
- ‚úÖ **Separation of Concerns** - —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- ‚úÖ **Single Responsibility** - –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å
- ‚úÖ **Dependency Inversion** - –∏–Ω–≤–µ—Ä—Å–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚úÖ **Open/Closed Principle** - –æ—Ç–∫—Ä—ã—Ç–æ—Å—Ç—å –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
- ‚úÖ **DRY Principle** - –Ω–µ –ø–æ–≤—Ç–æ—Ä—è–π—Å—è

### **–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–≤—ã–∫–∏:**
- ‚úÖ **Security Best Practices** - –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- ‚úÖ **Error Handling** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ **User Experience** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç
- ‚úÖ **Code Quality** - –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞
- ‚úÖ **Documentation** - –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Å–ª—É–∂–∏—Ç –æ—Ç–ª–∏—á–Ω–æ–π –æ—Å–Ω–æ–≤–æ–π –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é –≤ –±—É–¥—É—â–µ–º.
